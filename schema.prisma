datasource db {
    provider = "sqlite"
    url      = "file:database.db"
}

generator client {
    provider = "prisma-client-py"
}

model Chat {
    id        String    @id @default(cuid())
    createdAt DateTime  @default(now())
    updatedAt DateTime  @updatedAt
    messages  Message[]
}

model Message {
    id         String           @id @default(cuid())
    chat       Chat             @relation(fields: [chatId], references: [id])
    chatId     String
    role       String           @default("user")
    content    MessageContent[]
    agentClass String
    createdAt  DateTime         @default(now())
    updatedAt  DateTime         @updatedAt
}

model MessageContent {
    id          String   @id @default(cuid())
    message     Message  @relation(fields: [messageId], references: [id])
    messageId   String
    messageType String   @default("text")
    content     String
    contentType String?
    createdAt   DateTime @default(now())
    updatedAt   DateTime @updatedAt
}
